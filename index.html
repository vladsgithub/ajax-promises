<!DOCTYPE html>
<html>
<head>
	<title>AJAX promises</title>
</head>
<body>

<h2 id="test">AJAX promises</h2>
<div id="result"></div>

<script>
	/*
	 document.getElementById("test").onclick = function() {
	 var XMLHttp = new XMLHttpRequest();
	 XMLHttp.open('POST', 'http://proxy/bigcount.ru/robots.txt', true);

	 XMLHttp.responseType = "";
	 //XMLHttp.setRequestHeader('Content-Type', 'text/html;charset=utf-8');

	 XMLHttp.onreadystatechange = function() {
	 // onreadystatechange активируется при получении ответа сервера

	 console.log("readyState=",XMLHttp.readyState);
	 console.log("statusText=",XMLHttp.statusText);
	 console.log("status=",XMLHttp.status);

	 if (XMLHttp.readyState === 4) {
	 // если запрос закончил выполняться

	 if(XMLHttp.status === 200) {
	 // если статус 200 (ОК) - выдать ответ пользователю
	 console.log("responseText=",XMLHttp.response);
	 document.getElementById("result").innerHTML = "XMLHttp=" +
	 XMLHttp.response;

	 }
	 // тут можно добавить else с обработкой ошибок запроса
	 }
	 }

	 XMLHttp.send(null);
	 }
	 */

	var promise = new Promise(function(resolve, reject) {
		// здесь вытворяй что угодно, если хочешь асинхронно, потом…

		//reject("No!");
		//resolve("Yes!");

		//arguments[0]("000");
		//arguments[1]("111");
		//arguments[2]("222");

		/*
		 if (false) {
		 resolve("Working!");
		 }
		 else {
		 //reject(Error("Broken :("));
		 reject("Broken :(");
		 }
		 */
	});

	//console.log(promise);


	promise.then(function(result) {
		console.log("done");
		console.log(result); // "Обрабатываем результат!"
	}, function(err) {
		console.log("errOR");
		console.log(err); // Ошибка: "Сломалось"
	});
</script>
</body>
</html>