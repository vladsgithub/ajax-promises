<!DOCTYPE html>
<html>
<head>
	<title>AJAX promises</title>
</head>
<body>

	<h2 id="test">AJAX promises</h2>
	<div id="result"></div>

<script>
	document.getElementById("test").onclick = function() {
		var XMLHttp = new XMLHttpRequest();
		XMLHttp.open('GET', 'http://54.72.3.96:3000/techtalks', true);
		//XMLHttp.setRequestHeader('Content-Type', 'text/html;charset=UTF-8');
		//XMLHttp.setRequestHeader('Content-Type', '');
		XMLHttp.responseType = "json";

		XMLHttp.onreadystatechange = function() {
			// onreadystatechange активируется при получении ответа сервера

			console.log("readyState=",XMLHttp.readyState);
			console.log("statusText=",XMLHttp.statusText);
			console.log("status=",XMLHttp.status);

			if (XMLHttp.readyState == 4) {
				// если запрос закончил выполняться

				if(XMLHttp.status == 200) {
					// если статус 200 (ОК) - выдать ответ пользователю
					//console.log("responseText=",XMLHttp.responseText);
					console.log("status=",XMLHttp.response);
					document.getElementById("result").innerHTML = XMLHttp.response;

				}
				// тут можно добавить else с обработкой ошибок запроса
			}
		}

		XMLHttp.send(null);
	}

	function data(){
		var as = 5;
		return as;
	}

	data().then(function(){
		console.log(as);
	})
</script>
</body>
</html>